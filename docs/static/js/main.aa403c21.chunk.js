(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{143:function(e,t,a){e.exports=a.p+"static/media/mappin.da7c5886.svg"},144:function(e,t,a){e.exports=a.p+"static/media/client.832362f3.svg"},148:function(e,t,a){e.exports=a(297)},154:function(e,t,a){},171:function(e,t){},173:function(e,t){},184:function(e,t){},186:function(e,t){},213:function(e,t){},215:function(e,t){},216:function(e,t){},222:function(e,t){},224:function(e,t){},242:function(e,t){},245:function(e,t){},261:function(e,t){},264:function(e,t){},292:function(e,t,a){},297:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),o=a(53),i=a.n(o),r=(a(153),a(154),a(54)),c=a(81),l=a(141),u=a(142),m=a(147),g=a(146),h=a(308),d=a(309),f=a(307),p=a(310),v=a(299),E=a(301),M=a(37),b=a.n(M),y=a(143),S=a.n(y),w=a(144),j=a.n(w),k=(a(291),a(13)),x=a.n(k),O=(a(292),"localhost"===window.location.hostname?"http://localhost:5000/api/v1/messages":"github.io.parveenmittal1");function C(e){return fetch(O,{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))}var L=a(300),U=a(306),N=a(302),z=a(303),I=a(304),A=a(305),V=function(e){return s.a.createElement(v.a,{body:!0,className:"message-form"},s.a.createElement(L.a,null,"Welcome to the My site "),s.a.createElement(E.a,null,"Leave a message with your location !"),e.sendingMessage||e.sentMessage||e.haveUserLoction?e.sendingMessage||e.haveUserLoction?s.a.createElement("video",{autoPlay:!0,loop:!0,src:"https://media.giphy.com/media/hWSQvXbDDh8rlnoLOt/giphy.mp4"}):s.a.createElement(E.a,null,"Thanks for submitting a message"):s.a.createElement(N.a,{onSubmit:e.formSubmitted},s.a.createElement(z.a,{row:!0},s.a.createElement(I.a,{for:"name"},"Name"),s.a.createElement(A.a,{onChange:e.valueChanged,type:"text",name:"name",id:"name",placeholder:"enter your name"})),s.a.createElement(z.a,{row:!0},s.a.createElement(I.a,{for:"message"},"Message"),s.a.createElement(A.a,{onChange:e.valueChanged,type:"textarea",name:"message",id:"message",placeholder:"enter your message"})),s.a.createElement(U.a,{type:"submit",className:"btn btn-primary",color:"info",disabled:!e.formIsValid()},"Send")," "))},D=x.a.icon({iconUrl:S.a,iconSize:[50,81],iconAnchor:[0,41],popupAnchor:[0,-41]}),P=x.a.icon({iconUrl:j.a,iconSize:[50,81],iconAnchor:[0,41],popupAnchor:[0,-41]}),W=b.a.object().keys({name:b.a.string().alphanum().min(1).max(100).required(),message:b.a.string().min(1).max(100).required()}),J=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={location:{lat:51.505,lng:-.09},zoom:13,userMessage:{name:"",message:""},sendingMessage:!1,sentMessage:!1,messages:[]},e.formIsValid=function(){var t={name:e.state.userMessage.name,message:e.state.userMessage.message};return!(b.a.validate(t,W).error&&!e.state.haveUserLoction)},e.formSubmitted=function(t){(t.preventDefault(),e.formIsValid())&&(e.setState({sendingMessage:!0}),C({name:e.state.userMessage.name,message:e.state.userMessage.message,latitude:e.state.location.lat,longitude:e.state.location.lng}).then((function(t){setTimeout((function(){e.setState({sendingMessage:!1,sentMessage:!0})}),4e3)})))},e.valueChanged=function(t){var a=t.target,n=a.name,s=a.value;e.setState((function(e){return{userMessage:Object(c.a)(Object(c.a)({},e.userMessage),{},Object(r.a)({},n,s))}}))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch(O).then((function(e){return e.json()})).then((function(e){var t={};return e.reduce((function(a,n){var s="".concat(n.latitude.toFixed(3),"+").concat(n.longitude.toFixed(3));return t[s]?(t[s].otherMessages=t[s].otherMessages||[],t[s].otherMessages.push(n)):(t[s]=e,a.push(n)),a}),[])})).then((function(t){e.setState({messages:t})})),new Promise((function(e){navigator.geolocation.getCurrentPosition((function(t){e({lat:t.coords.latitude,lng:t.coords.longitude})}),(function(){e(fetch("https://ipapi.co/json").then((function(e){return e.json()})).then((function(e){return{lat:e.latitude,lng:e.longitude}})))}))}),(function(){})).then((function(t){e.setState({location:t})}))}},{key:"render",value:function(){var e=[this.state.location.lat,this.state.location.lng];return s.a.createElement("div",{className:"map"},s.a.createElement(h.a,{className:"map",center:e,zoom:this.state.zoom},s.a.createElement(d.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),this.state.haveUserLocation?s.a.createElement(f.a,{position:e,icon:D}):"",",",this.state.messages.map((function(e){return s.a.createElement(f.a,{key:e._id,position:[e.latitude,e.longitude],icon:P},s.a.createElement(p.a,null,s.a.createElement("p",null,s.a.createElement("em",null,e.name,":")," ",e.message),e.otherMessages?e.otherMessages.map((function(e){return s.a.createElement("p",{key:e._id},s.a.createElement("em",null,e.name,":")," ",e.message)})):""))})),"}"),s.a.createElement(V,{sendingMessage:this.setState.sendingMessage,sentMessage:this.setState.sentMessage,haveUsersLocation:this.setState.haveUsersLocation,formSubmitted:this.formSubmitted,valueChanged:this.valueChanged,formIsValid:this.formIsValid}),s.a.createElement(v.a,{className:"footer"},s.a.createElement(E.a,null,"Made with love by",s.a.createElement("a",{href:"https://github.com/parveenmittal1",target:"_blank"},"Parveen"))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[148,1,2]]]);
//# sourceMappingURL=main.aa403c21.chunk.js.map